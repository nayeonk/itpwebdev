Authentication
==============

### Overview

You will be creating an authentication module where users can login to an administrative dashboard. In this homework, you will use Composer to leverage 2 popular PHP packages:

* Symfony's HttpFoundation Components to interact with:
	* request data
	* sessions
	* responses (redirects)
* Carbon for date formatting on the Dashboard page

You will __NOT__ be accessing PHP superglobal data using $\_GET, $\_POST, or $\_SESSION. You will instead use Symfony's HttpFoundation.

You will create 4 php scripts:

* login.php
* login-process.php
* dashboard.php
* logout.php

When a user logs in, the credentials will be compared against the users table in the __music__ database. There are a few accounts in there for you to work with. The password is _laravel_ for all accounts and it is encrypted using the MySQL SHA1() function. Feel free to add your own accounts to this table for testing.

Lastly, you should using the autoloader generated by Composer to autoload any components and custom classes that you create.

### login.php

Create a form with username and password inputs. It will make a post request to login-process.php.

### login-process.php

This page is responsible for processing a login request.

* if the user navigates directly to this page, redirect back to the login page
* if valid credentials are passed, store the following data in the session
	* username
	* unix timestamp of the logged in time
* once logged in redirect to dashboard.php and display a flash message "You have successfully logged in!"
* if invalid credentials were passed, redirect to login.php with an error flash message "Incorrect credentials"

Create an Auth class in the ITP namespace. This will use PDO behind the scenes. It will have a method _attempt()_ to check if a username and password are valid credentials and it will return a Boolean. Make sure you use prepared statements.

```php
$authentication = new ITP\Auth($pdo);
$authentication->attempt($username, $password); // returns TRUE or FALSE
```

### dashboard.php

The dashboard is a page that only authenticated users can access. If I navigate directly to this page and I am not logged in, I should be redirected to login.php.

Display a table with headings of all songs containing:

* title
* artist
* genre
* price

Your query should be wrapped in a class with the following API:

```php
$songQuery = new ITP\Songs\SongQuery($pdo);
$songQuery->withArtist();
$songQuery->withGenre();
$songQuery->orderBy('title');
$songs = $songQuery->all();
```

The _all()_ method should return an array of objects.

In the upper right corner, display:

* the username of the logged in user
* the time of the login in the format: Last Login: 5 seconds ago. Use the Carbon package for this.
* Logout link

### logout.php

This should destroy the session and redirect to login.php.

### Other Requirements

* There should only be 1 database connection per request. Create a file called db.php like in previous assignment and use that same connection across pages
* Classes should be in their own file and namespaced properly to follow psr-0 autoloading standard.
* Make these pages presentable where it is easy for me to use and read (data should be organized on the screen with plenty of white space and separators).

### Submission

To submit, push this code up to the __same repository__ with a folder called PHP-Auth-A3 and email the repository URL to itpwebdev@gmail.com

